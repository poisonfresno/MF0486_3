(window.webpackJsonp=window.webpackJsonp||[]).push([[27,16],{143:function(t,e,n){"use strict";var s={props:["post"],data:function(){return{device:defaults.device}}},r=n(0),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"info-extra"},[n("ul",[n("li",{staticClass:"published-time"},[n("span",{staticClass:"icon-clock"}),t._v(" "+t._s(t.post.date))]),t._v(" "),"mobile"===t.device?n("li",{staticClass:"author"},[t._v("Por "),n("strong",[t._v(t._s(t.post.author.name))])]):n("li",{staticClass:"author"},[n("strong",[t._v(t._s(t.post.author.name))])]),t._v(" "),"mobile"!==t.device&&t.post.comments.count>0?n("li",{staticClass:"comments"},[n("i",{staticClass:"icon-comment"}),n("span",{staticClass:"count"},[t._v(t._s(t.post.comments.count))])]):t._e()])])}),[],!1,null,null,null);e.a=o.exports},144:function(t,e,n){"use strict";var s={props:["title","url"]},r=n(0),o=Object(r.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("a",{attrs:{href:this.url}},[this._v("\n        "+this._s(this.title)+"\n    ")])])}),[],!1,null,null,null);e.a=o.exports},147:function(t,e,n){"use strict";var s=n(27);e.a={methods:{truncateText:function(t,e,n,r){return""===t?Object(s.a)(e,n,{ellipsis:"...",byWords:!0,excludes:r}):e}}}},149:function(t,e){t.exports=function(t,e){var n,s,r,o,i=0;return function(){n=this,s=arguments;var t=new Date-i;return o||(t>=e?a():o=setTimeout(a,e-t)),r};function a(){o=0,i=+new Date,r=t.apply(n,s),n=null,s=null}}},151:function(t,e,n){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,o=(r=n(149))&&"object"===s(r)&&"default"in r?r.default:r,i=["scroll","resize"],a={name:"mugen-scroll",props:{handler:{type:Function,required:!0},shouldHandle:{type:Boolean,default:!0},threshold:{type:Number,default:0},thresholdY:{type:Number,default:0},handleOnMount:{type:Boolean,default:!0},scrollContainer:{type:String},isSearching:{type:Boolean,default:!1}},data:function(){return{gazSiteDirectory:defaults.gaz_site_directory}},mounted:function(){this.checkInView()},methods:{checkInView:function(){var t=this,e=function(){var e=function(t,e){void 0===e&&(e={});var n=e.offset;void 0===n&&(n={});var s=e.threshold;if(void 0===t)return!1;var r=t.getBoundingClientRect(),o=r.top,i=r.right,a=r.bottom,c=r.left,l=r.width,u=r.height,h=a,f=window.innerWidth-c,d=window.innerHeight-o,p=i,m=s*l,v=s*u-e.thresholdY;return h>=(n.top||0+v)&&f>=(n.right||0+m)&&d>=(n.bottom||0+v)&&p>=(n.left||0+m)}(t.$refs.scroll,{threshold:t.threshold,thresholdY:t.thresholdY});if(t.shouldHandle&&e){if("SearchResult"!==t.$parent.$options.name&&t.isSearching)return;t.handler()}};if(this.handleOnMount&&e(),this.scrollContainer){for(var n=this;(n=n.$parent)&&!this._scrollContainer;)t._scrollContainer=n.$refs[t.scrollContainer];this._scrollContainer&&this._scrollContainer.$el&&(this._scrollContainer=this._scrollContainer.$el)}this._scrollContainer=this._scrollContainer||window,this.check=o(e,200),i.forEach((function(e){return t._scrollContainer.addEventListener(e,t.check)}))}},render:function(t){return t("div",{staticClass:"mugen-scroll",ref:"scroll"},this.$slots.default)},beforeDestroy:function(){var t=this;i.forEach((function(e){return t._scrollContainer.removeEventListener(e,t.check)}))}};"undefined"!=typeof window&&window.Vue&&window.Vue.component(a.name,a),t.exports=a},162:function(t,e,n){"use strict";n.r(e);var s=n(1);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=l(t);if(e){var r=l(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(c,t);var e,n,s,r=a(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=r.call(this,t)).endPoint="/wp-json/gaz-v1/",e}return e=c,(n=[{key:"page",value:function(t){if(!this.loadingData){var e=this.parameters.context+"/"+t;void 0!==this.parameters.order&&(e=e.concat("/",this.parameters.order)),void 0!==this.parameters.criteria&&(e=e.concat("/",this.parameters.criteria)),this.action=e,this.load()}}}])&&o(e.prototype,n),s&&o(e,s),c}(n(10).a),h=n(151),f=n.n(h),d=n(144),p=n(37),m=n(143),v={props:["posts"],mixins:[n(147).a],components:{PieceTitle:d.a,PieceCategoryPills:p.default,PieceInfoExtraPost:m.a},methods:{closeSearch:function(){s.a.$emit("closeSearchEvent")}}},y=n(0),_=Object(y.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"articles"},t._l(t.posts,(function(e){return n("article",{staticClass:"news-item"},[n("header",[n("a",{attrs:{href:e.link,"data-postId":e.id,type:e.type},on:{click:t.closeSearch}},[n("img",{staticClass:"thumbnail",attrs:{src:e._embedded.featured.img,alt:e._embedded.featured.alt,srcset:e._embedded.featured.srcset,sizes:e._embedded.featured.sizes}})]),t._v(" "),n("piece-category-pills",{attrs:{categories:e._embedded.terms}})],1),t._v(" "),n("h2",{staticClass:"title",on:{click:t.closeSearch}},[n("a",{attrs:{href:e.link,"data-postId":e.id,type:e.type},domProps:{innerHTML:t._s(e.title.rendered)}})]),t._v(" "),n("piece-info-extra-post",{attrs:{post:e}}),t._v(" "),n("div",{staticClass:"excerpt",domProps:{innerHTML:t._s(t.truncateText(e.content.rendered,e.excerpt.rendered,70,["a","img"]))}}),t._v(" "),n("div",{staticClass:"read-more"},[n("a",{attrs:{href:e.link,"data-postId":e.id,type:e.type}},[t._v("Leer más")])])],1)})),0)}),[],!1,null,null,null).exports,b={name:"SearchResult",components:{EventBus:s.a,GazMugenScroll:f.a,PostList:_},data:function(){return{canSearch:!1,isResultVisible:!1,loadingPosts:!1,loadingScreen:!1,posts:[],page:1,postsPool:[],criteria:"",infiniteScrollHasItems:!0,searchHasResults:!1}},created:function(){this.loader=new u({context:"find"}),s.a.$on("searchEvent",this.searchEvent),s.a.$on("closeSearchEvent",this.closeSearchEvent)},beforeDestroy:function(){s.a.$off("searchEvent",this.searchEvent),s.a.$off("closeSearchEvent",this.closeSearchEvent)},watch:{postsPool:function(t){t.length<2&&!this.loadingPosts&&this.canSearch&&this.isResultVisible&&(this.loadingPosts=!0,this.queryInfinitePage())}},computed:{searchContentClass:function(){return this.isResultVisible?"show-with-transition":"hide-with-transition"}},methods:{closeSearchEvent:function(){this.isResultVisible=!1,this.resetComponent()},searchEvent:function(t){var e=this;this.canSearch=!0,this.resetComponent(),this.loader.parameters.criteria=t.criteria,this.loader.parameters.order=t.order,this.criteria=t.criteria,this.isResultVisible=!0,this.loader.setCallBack((function(t){t.length<=0?e.infiniteScrollHasItems=!1:e.searchHasResults=!0,e.addPostsToPool(t),e.loadingPosts=!1,e.postStorage.setArray(t),e.$nextTick((function(){s.a.$emit("bind-post-links")}))}))},resetComponent:function(){this.posts=[],this.postsPool=[],this.page=1,this.infiniteScrollHasItems=!0,this.searchHasResults=!1},queryInfinitePage:function(){this.loader.page(this.page)},addPostsToPool:function(t){for(var e=0;e<t.length;e++)this.posts.push(t[e]);this.postStorage.setArray(t),this.page++},fetchData:function(){this.loadingScreen||this.canSearch&&(this.loadingScreen=!0,this.queryInfinitePage(),this.loadingScreen=!1)}}},g=Object(y.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isResultVisible?n("section",{staticClass:"search-content",class:t.searchContentClass},[n("header",[n("h1",{staticClass:"title"},[t._v("Resultados de la búsqueda: "+t._s(t.criteria))])]),t._v(" "),n("div",{staticClass:"search-result",attrs:{id:"searchresult"}},[n("div",{staticClass:"articles"},[n("post-list",{attrs:{posts:t.posts}})],1),t._v(" "),this.infiniteScrollHasItems||this.searchHasResults?t._e():n("div",[t._m(0)])]),t._v(" "),t.infiniteScrollHasItems?n("gaz-mugen-scroll",{attrs:{handler:t.fetchData,"should-handle":!t.loadingScreen,threshold:0,thresholdY:500}}):t._e()],1):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("\n                    No se han encontrado resultados para la búsqueda.\n                ")])])}],!1,null,null,null);e.default=g.exports}}]);